
{% extends "base.html" %}

{% block content %}

<div class="container mt-5">

    <div class="row">
        <h2>Terapie Pazienti in Cura</h2>
        <table id="patientTable" class="table">
            <thead>
                <tr>
                    <th>Nome paziente</th>
                    <th>Tipo Patologia</th>
                    <th>Data Creazione</th>
                    <th>Storia Terapia</th>
                    <th>Controllo </th>
                </tr>
            </thead>
            <tbody>
                {% for id_patient,patient_name,id_pathology,pathology_name,id_pathology_type,pathology_type_name,creation_date,row_id in pathology_list %}
                    <tr class="patientRow" >
                        <td>{{ patient_name }}</td>
                        <td>{{ pathology_name }}</td>
                        <td>{{ creation_date|format_date }}</td>
                        <td>
                            <form method="get" action="{{ url_for('doctor.patient_history', id_pathology=id_pathology,id_pathology_type=id_pathology_type) }}">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <button class="btn btn-primary" type="submit">Vedi </button>
                            </form>    
                        </td>
                        <td>
                            <form method="get" action="{{ url_for('doctor.insert_custom_control',row_id=row_id) }}">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <button class="btn btn-success" type="submit">Aggiungi </button>
                            </form>    
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}